<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Room</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.4.0/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script src="/script/game.js"></script>
    <!-- 별도의 JS 파일로 관리하는 것을 권장 -->
    <style>
        /* 기존 스타일 유지 */
        /* ... */
    </style>
</head>
<body>
<h1>Room Information</h1>
<p><strong>Room ID: </strong><span th:text="${roomInfo.roomId}"></span></p>
<p><strong>Room Name: </strong><span th:text="${roomInfo.roomName}"></span></p>
<p><strong>Topic ID: </strong><span th:text="${roomInfo.topicId}"></span></p>
<p><strong>Max People: </strong><span th:text="${roomInfo.maxPeople}"></span></p>
<p><strong>Quiz Count: </strong><span th:text="${roomInfo.quizCount}"></span></p>

<!-- 단일 Ready 버튼 추가: "내" Ready 상태만 토글 -->
<button id="ready-btn"
        th:if="${roomInfo.role() == T(com.example.quiz.enums.Role).USER}"
        th:attr="data-user-id=${roomInfo.inGameUser().id}">
    Ready Game
</button>

<!-- 방장(Admin)만 Start Game 버튼 등 필요시 추가 -->
<button id="start-btn"
        th:if="${roomInfo.role() == T(com.example.quiz.enums.Role).ADMIN}"
        th:attr="data-user-id=${roomInfo.inGameUser().id}">
    Start Game
</button>

<h2>Users in Room</h2>
<table id="userTable">
    <thead>
    <tr>
        <th>User ID</th>
        <th>User Name</th>
        <th>Ready Status</th>
    </tr>
    </thead>
    <tbody id="participants">
    <tr th:each="participant : ${roomInfo.participants}">
        <td th:text="${participant.id}"></td>
        <td th:text="${participant.username}"></td>
        <td th:text="${participant.readyStatus ? 'Ready' : 'Not Ready'}"
            th:classappend="${participant.readyStatus ? 'ready-true' : 'ready-false'}">
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>